<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A Video for {{PROSPECT_NAME}} | Introscale</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; }

    .player-wrapper { position: relative; }

    .video-player-container {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      cursor: pointer;
      overflow: hidden;
      border-radius: 0.75rem;
      background-color: #000;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .screen-video-visual, .face-video-wrapper {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
    }

    .face-video-wrapper {
      z-index: 3;
      width: 20%;
      aspect-ratio: 1/1;
      border-radius: 9999px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      bottom: 5%;
      right: 2%;
      display: none;
    }

    .screen-video-visual, .face-video-visual {
      object-fit: cover;
      width: 100%;
      height: 100%;
    }

    .thumbnail-overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 6;
      cursor: pointer;
    }

    .thumbnail-overlay img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .custom-controls {
      position: absolute;
      bottom: 0; left: 0;
      width: 100%;
      z-index: 5;
      display: flex;
      align-items: center;
      padding: 0.625rem;
      background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }

    .custom-controls.visible { opacity: 1; }

    .custom-controls button {
      background: none; border: none; cursor: pointer; padding: 0.3125rem;
      display: flex; align-items: center; justify-content: center;
    }

    .custom-controls svg { fill: white; width: 24px; height: 24px; }
    #playPauseBtn .pause-icon { display: none; }
    .playing #playPauseBtn .play-icon { display: none; }
    .playing #playPauseBtn .pause-icon { display: block; }

    #muteBtn .volume-off-icon { display: none; }
    .muted #muteBtn .volume-on-icon { display: none; }
    .muted #muteBtn .volume-off-icon { display: block; }

    #progress-bar {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 8px;
      flex-grow: 1;
      margin: 0 0.9375rem;
      cursor: pointer;
      border-radius: 4px;
      background: linear-gradient(to right, #2563EB 0%, #2563EB 0%, #555 0%, #555 100%);
    }

    #progress-bar::-webkit-slider-thumb, #progress-bar::-moz-range-thumb, #progress-bar::-ms-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      background: #2563EB;
      border-radius: 50%;
      border: 2px solid white;
    }

    #time-display { color: white; font-size: 0.875rem; min-width: 90px; }

    #video-cta-button {
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 4;
      display: none;
      padding: 0.75rem 1.5rem;
      background-color: #2563EB;
      color: white;
      font-weight: 600;
      border-radius: 9999px;
      text-decoration: none;
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      transition: all 0.2s ease-in-out;
    }

    #video-cta-button:hover { background-color: #1D4ED8; transform: scale(1.05); }

    #video-end-screen {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 7;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #end-screen-cta-button {
      padding: 1rem 2rem;
      background-color: #2563EB;
      color: white;
      font-size: 1.125rem;
      font-weight: 700;
      border: none;
      border-radius: 9999px;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }

    #end-screen-cta-button:hover { background-color: #1D4ED8; transform: scale(1.05); }

    #replay-button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: none;
      color: white;
      font-size: 1rem;
      font-weight: 500;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      opacity: 0.8;
      transition: opacity 0.2s ease-in-out;
    }

    #replay-button:hover { opacity: 1; }

    #replay-button svg {
      margin-right: 0.5rem;
      fill: white;
      width: 20px;
      height: 20px;
    }

    /* Fullscreen Mode Adjustments */
    .player-wrapper:fullscreen .video-player-container {
      border-radius: 0;
      width: 100%;
      height: 100%;
    }

    .player-wrapper:fullscreen .screen-video-visual { object-fit: contain; }

    .player-wrapper:fullscreen .face-video-wrapper {
      width: 25%;
      bottom: 8%;
      right: 4%;
    }

    @media (max-width: 480px) {
      .custom-controls { padding: 4px; }
      .custom-controls svg { width: 20px; height: 20px; }
      .custom-controls button { padding: 4px; }
      #time-display { font-size: 0.75rem; min-width: 70px; }
      #progress-bar { margin: 0 6px; }
      #video-cta-button { top: 0.5rem; right: 0.5rem; padding: 0.5rem 1rem; font-size: 0.875rem; }
      #end-screen-cta-button { padding: 0.75rem 1.5rem; font-size: 1rem; }

      .player-wrapper:fullscreen .face-video-wrapper {
        width: 35%;
        bottom: 12%;
        right: 5%;
      }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- HEADER -->
  <header class="bg-white shadow-md">
    <div class="max-w-7xl mx-auto flex items-center justify-center px-6 py-4">
      <a href="/" class="flex items-center">
        <img src="your-logo.png" alt="Introscale Logo" class="h-10">
      </a>
    </div>
  </header>

  <!-- MAIN -->
  <main class="py-12">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900">A Custom Strategy for {{PROSPECT_NAME}}</h1>

      <!-- PLAYER -->
      <div class="player-wrapper mt-8" id="playerWrapper">
        <a href="#calendar-section" id="video-cta-button">Book a Call</a>
        <div class="video-player-container" id="myCustomPlayer">
          <video class="screen-video-visual" id="screenVideo" playsinline muted preload="none" style="display:none;"></video>
          <div class="face-video-wrapper" id="faceWrapper">
            <video class="face-video-visual" id="faceVideo" playsinline muted preload="none" style="display:none;"></video>
          </div>

          <div class="thumbnail-overlay" id="thumbnailOverlay">
            <img id="thumbnail" alt="Video Thumbnail">
          </div>

          <!-- Controls -->
          <div class="custom-controls" id="customControls">
            <button id="playPauseBtn">
              <svg class="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
              <svg class="pause-icon" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <button id="muteBtn">
              <svg class="volume-on-icon" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3z"/></svg>
              <svg class="volume-off-icon" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45z"/></svg>
            </button>
            <input type="range" id="progress-bar" value="0" step="0.1">
            <span id="time-display">00:00 / 00:00</span>
            <button id="fullscreenBtn">
              <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7zM14 5v2h3v3h2V5z"/></svg>
            </button>
          </div>

          <!-- End Screen -->
          <div id="video-end-screen">
            <button id="end-screen-cta-button">Book a Call</button>
            <button id="replay-button">
              <svg viewBox="0 0 24 24"><path d="M12 5V1L7 6l5 5V7z"/></svg>
              Replay
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- CALENDAR -->
    <div id="calendar-section" class="max-w-4xl mx-auto px-6 text-center mt-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Ready to Grow? Book Your Free Strategy Call</h2>
      <div class="mt-8 w-full bg-white p-2 rounded-xl shadow-md h-[700px]">
        <div style="width:100%;height:100%;overflow:scroll" id="my-cal-inline-growthcall"></div>
      </div>
    </div>
  </main>

  <footer class="py-6 bg-gray-900 text-gray-400 text-center">
    <p>&copy; 2025 Introscale. All rights reserved.</p>
  </footer>

  <script>
    const playerWrapper = document.getElementById('playerWrapper');
    const playerContainer = document.getElementById('myCustomPlayer');
    const screenVideo = document.getElementById('screenVideo');
    const faceVideo = document.getElementById('faceVideo');
    const faceWrapper = document.getElementById('faceWrapper');
    const thumbnailOverlay = document.getElementById('thumbnailOverlay');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const muteBtn = document.getElementById('muteBtn');
    const progressBar = document.getElementById('progress-bar');
    const timeDisplay = document.getElementById('time-display');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const videoCtaButton = document.getElementById('video-cta-button');
    const calendarSection = document.getElementById('calendar-section');
    const videoEndScreen = document.getElementById('video-end-screen');
    const endScreenCtaButton = document.getElementById('end-screen-cta-button');
    const replayButton = document.getElementById('replay-button');
    const customControls = document.getElementById('customControls');

    screenVideo.src = "{{SCREEN_VIDEO_URL}}";
    faceVideo.src = "{{FACE_VIDEO_URL}}";
    document.getElementById('thumbnail').src = "{{THUMBNAIL_URL}}";

    let hasBeenStarted = false;
    let controlsTimeout;

    function showControls() {
      customControls.classList.add('visible');
      clearTimeout(controlsTimeout);
      controlsTimeout = setTimeout(() => {
        customControls.classList.remove('visible');
      }, 3000);
    }

    function formatTime(time) {
      const minutes = Math.floor(time / 60);
      const seconds = Math.floor(time % 60);
      return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    function togglePlayPause() {
      if (hasBeenStarted) {
        if (faceVideo.paused) faceVideo.play();
        else faceVideo.pause();
      }
    }

    function toggleMute() {
      faceVideo.muted = !faceVideo.muted;
      screenVideo.muted = !screenVideo.muted;
      playerWrapper.classList.toggle('muted', faceVideo.muted);
    }

    thumbnailOverlay.addEventListener('click', () => {
      if (!hasBeenStarted) {
        hasBeenStarted = true;
        faceVideo.muted = false;
        faceWrapper.style.display = "block";
        screenVideo.style.display = "block";
        faceVideo.style.display = "block";
        thumbnailOverlay.style.display = "none";
        faceVideo.play();
        screenVideo.play();
      }
    });

    faceVideo.addEventListener('loadedmetadata', () => {
      progressBar.max = faceVideo.duration;
      timeDisplay.textContent = `00:00 / ${formatTime(faceVideo.duration)}`;
    });

    faceVideo.addEventListener('play', () => {
      playerWrapper.classList.add('playing');
      videoCtaButton.style.display = 'block';
      screenVideo.play();
      showControls();
    });

    faceVideo.addEventListener('pause', () => {
      playerWrapper.classList.remove('playing');
      screenVideo.pause();
      showControls();
    });

    faceVideo.addEventListener('timeupdate', () => {
      progressBar.value = faceVideo.currentTime;
      timeDisplay.textContent = `${formatTime(faceVideo.currentTime)} / ${formatTime(faceVideo.duration)}`;
      const progressPercent = (faceVideo.currentTime / faceVideo.duration) * 100;
      progressBar.style.background = `linear-gradient(to right, #2563EB ${progressPercent}%, #555 ${progressPercent}%, #555 100%)`;
      screenVideo.currentTime = faceVideo.currentTime;
    });

    faceVideo.addEventListener('ended', () => {
  // When the face video ends — show the calendar section and end-screen
  calendarSection.scrollIntoView({ behavior: 'smooth' });
  playerWrapper.classList.remove('playing');
  playerWrapper.classList.add('paused');
  videoCtaButton.style.display = 'none';
  videoEndScreen.style.display = 'flex';
  // pause & align both videos at the end
  try { faceVideo.pause(); } catch(e){}
  try { screenVideo.pause(); } catch(e){}
  if (faceVideo.duration) {
    faceVideo.currentTime = faceVideo.duration;
    screenVideo.currentTime = faceVideo.duration;
  }
  showControls();
});

// Play / Pause control
playPauseBtn.addEventListener('click', (e) => {
  e.stopPropagation();
  if (!hasBeenStarted) { thumbnailOverlay.click(); return; }
  if (faceVideo.paused) faceVideo.play(); else faceVideo.pause();
});

// Mute control
muteBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleMute(); });

// Clicking the container toggles playback (but ignore clicks on controls / overlays)
playerContainer.addEventListener('click', (event) => {
  const target = event.target;
  if (customControls.contains(target) || thumbnailOverlay.contains(target) || videoEndScreen.contains(target) || target === playPauseBtn || target === muteBtn || target === fullscreenBtn || target === progressBar) return;
  if (!hasBeenStarted) thumbnailOverlay.click(); else togglePlayPause();
});

// Seeking
progressBar.addEventListener('input', (e) => {
  const newTime = parseFloat(e.target.value);
  if (isNaN(newTime) || !faceVideo.duration) return;
  faceVideo.currentTime = newTime;
  screenVideo.currentTime = newTime;
  const progressPercent = (newTime / faceVideo.duration) * 100;
  progressBar.style.background = `linear-gradient(to right, #2563EB ${progressPercent}%, #555 ${progressPercent}%, #555 100%)`;
  showControls();
});

// Fullscreen toggle
fullscreenBtn.addEventListener('click', async (e) => {
  e.stopPropagation();
  try {
    if (!document.fullscreenElement) await playerWrapper.requestFullscreen();
    else await document.exitFullscreen();
  } catch (err) { console.warn('Fullscreen error', err); }
});

// Keep a light-weight CSS/JS sync for entering/exiting fullscreen
document.addEventListener('fullscreenchange', () => {
  if (document.fullscreenElement) {
    playerWrapper.classList.add('in-fullscreen');
    // hint for some browsers to repaint and pick up :fullscreen CSS
    faceWrapper.style.willChange = 'transform';
  } else {
    playerWrapper.classList.remove('in-fullscreen');
    faceWrapper.style.willChange = '';
  }
});

// CTA: pause video and scroll to calendar (handles exiting fullscreen first)
const scrollToCalendarAndPause = () => {
  if (!faceVideo.paused) faceVideo.pause();
  if (document.fullscreenElement) {
    const onFullscreenChange = () => {
      if (!document.fullscreenElement) {
        calendarSection.scrollIntoView({ behavior: 'smooth' });
        document.removeEventListener('fullscreenchange', onFullscreenChange);
      }
    };
    document.addEventListener('fullscreenchange', onFullscreenChange);
    document.exitFullscreen();
  } else {
    calendarSection.scrollIntoView({ behavior: 'smooth' });
  }
};

videoCtaButton.addEventListener('click', (event) => { event.preventDefault(); scrollToCalendarAndPause(); });
endScreenCtaButton.addEventListener('click', (e) => { e.preventDefault(); scrollToCalendarAndPause(); });

replayButton.addEventListener('click', (e) => {
  e.stopPropagation();
  videoEndScreen.style.display = 'none';
  faceVideo.currentTime = 0;
  screenVideo.currentTime = 0;
  faceVideo.play();
});

// Controls: auto-show on pointer/mouse/touch activity and hide after inactivity
let touchStartTime = 0;
playerWrapper.addEventListener('mousemove', showControls);
playerWrapper.addEventListener('pointermove', showControls);
playerWrapper.addEventListener('touchstart', (e) => { touchStartTime = Date.now(); showControls(); }, { passive: true });

// Treat short taps as play/pause toggle when not interacting with controls
playerWrapper.addEventListener('touchend', (e) => {
  const touchDuration = Date.now() - touchStartTime;
  const target = e.target;
  if (touchDuration < 250 && !customControls.contains(target) && !videoEndScreen.contains(target)) {
    if (!hasBeenStarted) thumbnailOverlay.click(); else togglePlayPause();
  }
});

// Keyboard shortcuts (space = play/pause, M = mute)
document.addEventListener('keydown', (e) => {
  if (['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
  if (e.code === 'Space') { e.preventDefault(); togglePlayPause(); }
  if (e.key === 'm' || e.key === 'M') toggleMute();
});

// If playback stalls, show controls so user can interact
faceVideo.addEventListener('waiting', showControls);
screenVideo.addEventListener('waiting', showControls);

// Hint controls on initial interaction
thumbnailOverlay.addEventListener('mouseenter', showControls);
thumbnailOverlay.addEventListener('touchstart', showControls, { passive: true });

// Keep screenVideo loosely in sync during unusual seeking
screenVideo.addEventListener('seeking', () => { if (Math.abs(screenVideo.currentTime - faceVideo.currentTime) > 0.5) screenVideo.currentTime = faceVideo.currentTime; });

// Final UX hint: briefly show controls on load
showControls();

</script>
</body>
</html>

     

